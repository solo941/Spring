# Sping AOP

## 定义

借助Spring框架的帮助，业务模块被合理的纵向分割，彼此之间互相独立。而将这些纵向柱形的业务模块共同的，重复的部分横向切分放大，就称之为切面。在AOP中，描述切面的术语有通知（advice），切点（pointcut），连接点（join point）。

通知（advice）：它用于描述切面的目标 即切面必须要完成的工作。通知定义了切面是什么以及何时使用。advice共有5种类型：

1.前置通知（Before）：在目标方法被调用之前调用通知功能。

2.后置通知（After）：在目标方法完成之后调用通知，此时不会关心方法的输出是什么。

3.返回通知（After-returning）：在目标方法成功执行之后调用通知。

4.异常通知（After-throwing）：在目标方法抛出异常后调用通知。

5.环绕通知（Around）：通知包裹了被通知的方法，在被通知的方法调用之前和调用之后执行自定义的行为。

连接点（join point）：

是在应用执行过程中能够插入切面的一个点。这个点可以是调用方法时、抛出异常时、甚至修改一个字段时。它是所有切入方法的集合。

切点（pointcut）：一个切面并不需要通知应用的所有连接点。切点有助于缩小切面所通知的连接点范围。切点的定义会匹配通知所要织入的一个或多个连接点。是选择切入的joinPoint的集合。

举个例子：

```
@Pointcut("execution(* * getName()")  
```

Pointcut定义了规则，说明在任何包中的任何类中都应该对getName()方法应用通知，连接点将是类中存在的所有getName()方法的列表，以便可以将通知应用于这些方法。

## 实现

动态代理：Spring Aop 共有两种方法JDK动态代理和CGLIB 动态代理

CGLIB基于继承，代理对象继承目标对象；JDK基于实现，代理对象和目标对象实现同一接口。因此如果采用JDK动态代理，因此getBean需要获取接口的类文件。

静态代理：Aspectj Aop

完成代理后，spring容器中存在的是代理对象。